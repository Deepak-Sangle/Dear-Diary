{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { Component, useState, useRef } from 'react';\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport styles from \"../styles/login\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState(['', '', '', '']),\n    _useState4 = _slicedToArray(_useState3, 2),\n    passcode = _useState4[0],\n    setPasscode = _useState4[1];\n  var _useState5 = useState({}),\n    _useState6 = _slicedToArray(_useState5, 2),\n    new_styles = _useState6[0],\n    setNewStyles = _useState6[1];\n  var passcodeRefs = Array.from({\n    length: 4\n  }, function () {\n    return useRef(null);\n  });\n  var login = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var res = yield axios.post(`${BASE_URI}/login`, {\n          name: name,\n          password: passcode.join('')\n        });\n        var data = yield res.data;\n        if (data.success === true) {\n          navigate('/', {\n            state: data.data\n          });\n        } else {\n          alert(data.message);\n        }\n      } catch (e) {\n        alert(e.response.data.message);\n      }\n      document.getElementById('form').reset();\n    });\n    return function login() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  function validateSubmit(event) {\n    event.preventDefault();\n    if (name === \"\") {\n      alert(\"Enter valid username\");\n      return;\n    } else if (passcode.join('').length !== 4) {\n      alert(\"Enter exactly 4 digit password\");\n      return;\n    }\n    setNewStyles({\n      backgroundColor: \"#2d2d2d\",\n      color: \"white\"\n    });\n    console.log(name, passcode.join(''));\n  }\n  var setCorrectPasscode = function setCorrectPasscode(text, i) {\n    if (text.length > 1) return;\n    var acceptedKeys = ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    if (!acceptedKeys.includes(text)) return;\n    if (text.length === 1 && i < 3) {\n      passcodeRefs[i + 1].current.focus();\n    }\n    var new_passcode = _toConsumableArray(passcode);\n    new_passcode[i] = text;\n    setPasscode(new_passcode);\n  };\n  var onPressedKey = function onPressedKey(e, i) {\n    if (e.nativeEvent.key === 'Backspace' && passcode[i] === '' && i > 0) {\n      passcodeRefs[i - 1].current.focus();\n    }\n    if (e.nativeEvent.key === 'Enter') {\n      validateSubmit(e.nativeEvent);\n    }\n  };\n  return _jsx(ScrollView, {\n    children: _jsxs(ImageBackground, {\n      source: require(\"../../assets/images/bg.jpg\"),\n      style: styles.nameScreen,\n      children: [_jsx(Text, {\n        style: styles.name,\n        children: \"Dear Diary\"\n      }), _jsxs(View, {\n        children: [_jsx(Text, {\n          style: styles.yourName,\n          children: \"Login to your account\"\n        }), _jsx(TextInput, {\n          style: styles.inputName,\n          value: name,\n          onChangeText: setName,\n          placeholder: \"Enter Username\"\n        }), _jsx(Text, {\n          style: styles.yourName,\n          children: \"Enter Password\"\n        }), _jsx(View, {\n          style: styles.passcodeView,\n          children: [0, 1, 2, 3].map(function (i) {\n            return _jsx(TextInput, {\n              ref: passcodeRefs[i],\n              style: _objectSpread(_objectSpread({}, styles.inputName), styles.passcodeBox),\n              value: passcode[i],\n              inputMode: \"numeric\",\n              onKeyPress: function onKeyPress(e) {\n                return onPressedKey(e, i);\n              },\n              onChangeText: function onChangeText(text) {\n                return setCorrectPasscode(text, i);\n              }\n            }, i);\n          })\n        }), _jsx(TouchableOpacity, {\n          children: _jsx(View, {\n            style: {\n              margin: 20\n            },\n            children: _jsx(Button, {\n              title: \"Enter\",\n              onPress: validateSubmit,\n              color: \"#2d2d2d\"\n            })\n          })\n        }), _jsxs(View, {\n          style: styles.passcodeView,\n          children: [_jsx(Text, {\n            style: styles.wantTo,\n            children: \"Want to Register? \"\n          }), _jsx(Text, {\n            onPress: function onPress() {\n              return Linking.openURL(\"/register\");\n            },\n            style: _objectSpread(_objectSpread({}, styles.wantTo), styles.wantToA),\n            children: \"Click Here\"\n          })]\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","Component","useState","useRef","Linking","View","Text","StyleSheet","TextInput","Button","TouchableHighlight","TouchableOpacity","Image","ScrollView","ImageBackground","styles","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","passcode","setPasscode","_useState5","_useState6","new_styles","setNewStyles","passcodeRefs","Array","from","length","login","_ref","_asyncToGenerator","res","axios","post","BASE_URI","password","join","data","success","navigate","state","alert","message","e","response","document","getElementById","reset","apply","arguments","validateSubmit","event","preventDefault","backgroundColor","color","console","log","setCorrectPasscode","text","i","acceptedKeys","includes","current","focus","new_passcode","_toConsumableArray","onPressedKey","nativeEvent","key","children","source","require","style","nameScreen","yourName","inputName","value","onChangeText","placeholder","passcodeView","map","ref","_objectSpread","passcodeBox","inputMode","onKeyPress","margin","title","onPress","wantTo","openURL","wantToA"],"sources":["H:/Documents/Repositories/Dear Diary/mobile-client/src/screens/Login.js"],"sourcesContent":["import React, { Component, useState, useRef } from 'react';\r\nimport { Linking, View, Text, StyleSheet, TextInput, Button, TouchableHighlight, TouchableOpacity, Image, ScrollView, ImageBackground } from 'react-native';\r\nimport styles from '../styles/login';\r\n\r\nexport default function Login() {\r\n\r\n  const [name, setName] = useState('');\r\n  const [passcode, setPasscode] = useState(['','','','']);\r\n  const [new_styles, setNewStyles] = useState({});\r\n\r\n  const passcodeRefs = Array.from({ length: 4 }, () => useRef(null));\r\n\r\n  const login = async () => {\r\n    try{\r\n      const res = await axios.post(`${BASE_URI}/login`, {name, password : passcode.join('')});\r\n      const data = await res.data;\r\n      if(data.success === true){\r\n          navigate('/', {state : data.data});\r\n      }\r\n      else{\r\n          alert(data.message);\r\n      }\r\n    }\r\n    catch(e){\r\n      alert(e.response.data.message);\r\n    }\r\n    document.getElementById('form').reset();\r\n  }\r\n\r\n  function validateSubmit(event){\r\n      event.preventDefault();\r\n      if(name===\"\") {\r\n        alert(\"Enter valid username\");\r\n        return;\r\n      }\r\n      else if(passcode.join('').length !== 4) {\r\n        alert(\"Enter exactly 4 digit password\");\r\n        return;\r\n      }\r\n      setNewStyles({\r\n        backgroundColor: \"#2d2d2d\",\r\n        color: \"white\"\r\n      });\r\n      console.log(name, passcode.join(''));\r\n      // login();\r\n  }\r\n\r\n  const setCorrectPasscode = (text, i) => {\r\n    if(text.length > 1) return;\r\n    const acceptedKeys = ['','0','1','2','3','4','5','6','7','8','9'];\r\n    if(!acceptedKeys.includes(text)) return;\r\n    if(text.length === 1 && i<3) {\r\n      passcodeRefs[i+1].current.focus();\r\n    }\r\n    const new_passcode = [...passcode];\r\n    new_passcode[i] = text;\r\n    setPasscode(new_passcode);\r\n  }\r\n\r\n  const onPressedKey = (e, i) => {\r\n    if(e.nativeEvent.key === 'Backspace' && passcode[i] === '' && i>0) {\r\n      passcodeRefs[i-1].current.focus();\r\n    }\r\n    if(e.nativeEvent.key === 'Enter') {\r\n      validateSubmit(e.nativeEvent);\r\n    }\r\n  }\r\n\r\n  return(\r\n    <ScrollView >\r\n      <ImageBackground source={require('../../assets/images/bg.jpg')} style={styles.nameScreen}>\r\n        <Text style={styles.name}>Dear Diary</Text>\r\n        <View>\r\n          \r\n          <Text style={styles.yourName}>\r\n            Login to your account\r\n          </Text>\r\n\r\n          <TextInput style={styles.inputName} value={name} onChangeText={setName} placeholder=\"Enter Username\" />\r\n          <Text style={styles.yourName}>Enter Password</Text>\r\n          <View style={styles.passcodeView}>\r\n\r\n            {[0,1,2,3].map((i)=> {\r\n              return(\r\n                <TextInput \r\n                  key={i} \r\n                  ref={passcodeRefs[i]}\r\n                  style={{...styles.inputName, ...styles.passcodeBox}} \r\n                  value={passcode[i]} \r\n                  inputMode='numeric'\r\n                  onKeyPress={(e) => onPressedKey(e,i)} \r\n                  onChangeText={(text) => setCorrectPasscode(text, i)} \r\n                />\r\n              )\r\n            })}\r\n          </View>\r\n          <TouchableOpacity>\r\n            <View style={{margin : 20,}}>\r\n              {/* <Text onPress={validateSubmit} style={{...styles.submit, ...styles.inputName, ...new_styles}}  type=\"submit\" >Enter</Text> */}\r\n              <Button title='Enter' onPress={validateSubmit} color=\"#2d2d2d\"></Button>\r\n            </View>\r\n          </TouchableOpacity>\r\n          <View style={styles.passcodeView}>\r\n            <Text style={styles.wantTo}>Want to Register? </Text> \r\n            <Text onPress={() => Linking.openURL(\"/register\")} style={{...styles.wantTo, ...styles.wantToA}}>\r\n              Click Here\r\n            </Text>\r\n          </View>\r\n\r\n        </View>\r\n      </ImageBackground>\r\n    </ScrollView>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}